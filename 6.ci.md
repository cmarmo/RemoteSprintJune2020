# Continuous Integration

[Continuous integration](https://en.wikipedia.org/wiki/Continuous_integration) (CI)
is the practice of merging all developers' working copies to a shared mainline several times a day.

scikit-learn implement [different strategies](https://scikit-learn.org/stable/developers/contributing.html#continuous-integration-ci) of Continuous Integration
- [Azure pipelines](https://azure.microsoft.com/en-us/services/devops/pipelines/) are used for testing scikit-learn on Linux, Mac and Windows, with different dependencies and settings.
- [CircleCI](https://circleci.com/) is used to build the docs for viewing and for testing with PyPy on Linux.

## Lint checks

In both cases a preliminary [linting](https://en.wikipedia.org/wiki/Lint_(software)) check is applied: if the lint fails,
build checks are not performed, in order to economise computing resources.

Failing checks are visible at the end of the Pull Request page.

![Failing lint check](images/linting-crop.png)

Clicking on the [Details](https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/jobs/81249) link will expand
the reasons of the failure.

<a href="https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/jobs/81249" target="_blank">
  <img src="images/cidoclint.png" width="90%" />
</a>

The log file tells you where the lint issues are.
To locally check the code that you changed, you can run the following command:
``
git diff upstream/master -u -- "*.py" | flake8 --diff
``

## Documentation

A number of checks are performed during the [build of the documentation](https://scikit-learn.org/stable/developers/contributing.html#documentation)

![CircleCI checks](images/circleci.png)

After the [lint](https://github.com/scikit-learn/scikit-learn/blob/98f0b832f8888ab2dd3a143ddd09525dd11f0479/.circleci/config.yml#L89) (1)
the documentation [build](https://github.com/scikit-learn/scikit-learn/blob/98f0b832f8888ab2dd3a143ddd09525dd11f0479/.circleci/config.yml#L49) (2) process starts.
The [deploy](https://github.com/scikit-learn/scikit-learn/blob/98f0b832f8888ab2dd3a143ddd09525dd11f0479/.circleci/config.yml#L118) (3) step is meant to deploy the preview of the documentation for rendering checks.
The [doc artifact](https://github.com/scikit-learn/scikit-learn/blob/98f0b832f8888ab2dd3a143ddd09525dd11f0479/.circleci/artifact_path) (4) link list the documentation pages that have been modified by the pull request. 
The [doc-min-dependencies](https://github.com/scikit-learn/scikit-learn/blob/98f0b832f8888ab2dd3a143ddd09525dd11f0479/.circleci/config.yml#L4) (5) step builds the documentation with minimal versions dependencies
